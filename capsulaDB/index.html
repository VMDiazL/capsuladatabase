<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cápsula Educativa: Diseño de Bases de Datos</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="style.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.min.js"></script>
    <!--<script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.0/build/qrcode.min.js"></script>-->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>
    <link
      rel="stylesheet"
      href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css"
    />
  </head>
  <body>
    <header class="header" role="banner">
      <h1>Cápsula Educativa</h1>
      <h2>Diseño de Bases de Datos</h2>
    </header>

    <!-- Botón flotante de Chatbot -->
    <div
      class="chatbot-button"
      onclick="openChatbot()"
      aria-label="Abrir Chatbot de Ayuda"
      role="button"
      tabindex="0"
    >
      <svg
        class="chatbot-icon"
        viewBox="0 0 24 24"
        fill="none"
        stroke="#BC955C"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      >
        <title>Icono de Robot para Chatbot</title>
        <rect x="5" y="8" width="14" height="10" rx="2"></rect>
        <path d="M9 4L7 8M15 4l2 8"></path>
        <circle cx="9.5" cy="13.5" r="1.5" fill="#BC955C"></circle>
        <circle cx="14.5" cy="13.5" r="1.5" fill="#BC955C"></circle>
      </svg>
      <span>Chatbot de Ayuda</span>
    </div>

    <!-- Botón de Cerrar Sesión -->
    <div
      class="logout-button"
      onclick="clearLocalStorage()"
      aria-label="Cerrar Sesión"
      role="button"
      tabindex="0"
    >
      <svg
        class="logout-icon"
        viewBox="0 0 24 24"
        fill="none"
        stroke="#BC955C"
        stroke-width="2"
      >
        <path d="M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4M16 17l5-5-5-5M21 12H9" />
      </svg>
      <span>Cerrar Sesión</span>
    </div>

    <!-- Menú flotante -->
    <nav
      class="floating-menu"
      id="floatingMenu"
      role="navigation"
      aria-label="Menú de Navegación"
    >
      <ul>
        <li><a href="#portada" onclick="showSection('portada')">Portada</a></li>
        <li>
          <a href="#introduccion" onclick="showSection('introduccion')"
            >Introducción</a
          >
        </li>
        <li>
          <a href="#activacion" onclick="showSection('activacion')"
            >Activación</a
          >
        </li>
        <li>
          <a href="#desarrollo" onclick="showSection('desarrollo')"
            >Desarrollo</a
          >
        </li>
        <li>
          <a
            href="#evaluacion-formativa"
            onclick="showSection('evaluacion-formativa')"
            >Evaluación Formativa</a
          >
        </li>
        <li>
          <a href="#evaluacion" onclick="showSection('evaluacion')"
            >Evaluación</a
          >
        </li>
        <li>
          <a href="#sintesis" onclick="showSection('sintesis')">Síntesis</a>
        </li>
        <li><a href="#cierre" onclick="showSection('cierre')">Cierre</a></li>
        <li>
          <a href="#certificado" onclick="showSection('certificado')"
            >Certificado</a
          >
        </li>
      </ul>
    </nav>

    <!-- Indicador de progreso -->
    <div
      class="progress-bar"
      role="progressbar"
      aria-valuemin="0"
      aria-valuemax="100"
      aria-valuenow="0"
    >
      <div class="progress" id="progress"></div>
    </div>

    <!-- Formulario de Ingreso -->
    <section id="formulario" class="section active">
      <div class="container">
        <div class="card">
          <h1>¡Bienvenid@!</h1>
          <p>
            Ingresa tus datos (Nombre completo y Correo electrónico) para
            comenzar. Estos datos son necesarios para generar tu certificado de
            aprobación.
          </p>
          <form id="userForm" novalidate>
            <div class="input-group">
              <label for="nombre">Nombre Completo:</label>
              <input
                type="text"
                id="nombre"
                required
                aria-required="true"
                aria-describedby="nombre-error"
              />
              <span id="nombre-error" class="error" role="alert"></span>
            </div>
            <div class="input-group">
              <label for="correo">Correo Electrónico:</label>
              <input
                type="email"
                id="correo"
                required
                aria-required="true"
                aria-describedby="correo-error"
              />
              <span id="correo-error" class="error" role="alert"></span>
            </div>
            <button type="submit" class="btn">Iniciar Curso</button>
            <button
              type="button"
              onclick="clearLocalStorage()"
              class="btn secondary"
            >
              Borrar Datos
            </button>
          </form>
        </div>
      </div>
    </section>

    <!-- Portada -->
    <section id="portada" class="section">
      <div class="container">
        <div class="card">
          <h1>Diseño de Bases de Datos</h1>
          <svg
            class="db-icon portada-db-icon"
            viewBox="0 0 100 100"
            fill="none"
            stroke="#BC955C"
            stroke-width="2"
            aria-label="Icono animado de base de datos"
          >
            <title>Icono de Base de Datos</title>
            <ellipse cx="50" cy="20" rx="40" ry="10" fill="#006657" />
            <ellipse cx="50" cy="50" rx="40" ry="10" fill="#691C32" />
            <ellipse cx="50" cy="80" rx="40" ry="10" fill="#006657" />
            <path d="M10 20v60M90 20v60" stroke="#BC955C" />
          </svg>
          <p>
            Explora el fascinante mundo del diseño de bases de datos con esta
            cápsula educativa diseñada para ti.
          </p>
          <button class="btn" onclick="showSection('introduccion')">
            ¡Empezar!
          </button>
        </div>
      </div>
    </section>

    <!-- Introducción -->
    <section id="introduccion" class="section">
      <div class="container">
        <div class="card">
          <h2>Introducción al Diseño de Bases de Datos</h2>
          <p>
            Bienvenido a esta cápsula sobre el
            <strong>Modelamiento de Datos</strong>. Aprenderás cómo crear
            diagramas representativos de la información para una base de datos,
            un proceso esencial para que analistas, ingenieros y otros
            interesados obtengan una vista unificada de los datos de una
            organización. Exploraremos en detalle qué información se recolecta,
            las relaciones cruciales entre los datos y los métodos para su
            almacenamiento y análisis eficiente.
          </p>
          <p>
            Nos basaremos en el video "MODELAMIENTO DE DATOS | DISEÑO
            CONCEPTUAL, LOGICO Y FISICO | SQL - BASE DE DATOS" para cubrir las
            etapas clave:
          </p>
          <ul style="text-align: left; margin-left: 20px">
            <li>
              <strong>Descripción de Requisitos:</strong> La base, donde se
              recopila información en lenguaje natural y se definen las
              necesidades del sistema.
            </li>
            <li>
              <strong>Diseño Conceptual:</strong> Utilizaremos el modelo
              Entidad-Relación (ER) para una representación visual de alto nivel
              de las entidades y sus interacciones.
            </li>
            <li>
              <strong>Diseño Lógico:</strong> Detallaremos los datos con
              atributos, claves primarias y foráneas, aplicando la crucial etapa
              de normalización.
            </li>
            <li>
              <strong>Diseño Físico:</strong> Veremos cómo se traduce todo esto
              a un Sistema de Gestión de Bases de Datos (SGBD) específico,
              definiendo tipos de datos y estructuras de tablas.
            </li>
          </ul>
          <h3>Objetivos de Aprendizaje:</h3>
          <ul style="text-align: left; margin-left: 20px">
            <li>
              Comprender el proceso integral del modelamiento de datos y sus
              distintas etapas.
            </li>
            <li>
              Diferenciar claramente las características y entregables del
              diseño conceptual, lógico y físico.
            </li>
            <li>
              Identificar la importancia de la normalización y su aplicación en
              el diseño lógico.
            </li>
            <li>
              Entender cómo se definen entidades, atributos, relaciones, claves
              primarias y foráneas.
            </li>
            <li>
              Reconocer los elementos clave para la implementación física de una
              base de datos.
            </li>
          </ul>
          <svg
            class="db-icon"
            viewBox="0 0 100 100"
            fill="none"
            stroke="#BC955C"
            stroke-width="2"
            aria-label="Icono representativo de estructura de datos"
          >
            <title>Icono de Estructura de Datos</title>
            <rect x="20" y="20" width="60" height="60" rx="10" fill="#006657" />
            <path d="M30 40h40M30 60h40" stroke="#BC955C" />
          </svg>
          <button class="btn" onclick="showSection('activacion')">
            Siguiente
          </button>
        </div>
      </div>
    </section>

    <!-- Activación -->
    <section id="activacion" class="section">
      <div class="container">
        <div class="card">
          <h2>Activación de Conocimientos</h2>
          <p>
            ¡Ponte a prueba! Resuelve este juego Educaplay para rescatar tus
            conocimientos previos sobre bases de datos. Sigue las instrucciones
            en pantalla y completa la actividad.
          </p>
          <iframe
            title="Juego Educaplay: Desafío de Diseño de Base de Datos"
            allow="fullscreen; autoplay; allow-top-navigation-by-user-activation"
            allowfullscreen
            width="795"
            height="690"
            style="
              max-width: 100%;
              border: 2px solid #bc955c;
              border-radius: 10px;
            "
            frameborder="0"
            src="https://es.educaplay.com/juego/24339351-desafio_de_diseno_de_base_de_datos.html"
          ></iframe>
          <button class="btn" onclick="showSection('desarrollo')">
            Continuar
          </button>
        </div>
      </div>
    </section>

    <!-- Desarrollo -->
    <section id="desarrollo" class="section">
      <div class="container">
        <div class="card">
          <h2>Desarrollo: Fundamentos del Diseño de Bases de Datos</h2>
          <p style="margin-bottom: 25px">
            A continuación, exploraremos las tres etapas cruciales del
            modelamiento de datos, tal como se presentan en el video. Cada etapa
            construye sobre la anterior, llevándonos desde una idea abstracta
            hasta una base de datos funcional y optimizada.
          </p>

          <div class="content-block">
            <h3>1. Diseño Conceptual: La Visión de Alto Nivel</h3>
            <svg
              class="db-icon"
              viewBox="0 0 100 100"
              fill="none"
              stroke-width="2.5"
              aria-label="Icono de Diseño Conceptual con Entidades y Relación"
            >
              <title>Diseño Conceptual: Entidades y Relaciones</title>
              <!-- Entidad 1 -->
              <rect
                x="10"
                y="35"
                width="30"
                height="20"
                rx="3"
                stroke="#006657"
                fill="#006657"
                fill-opacity="0.3"
              />
              <text
                x="25"
                y="47"
                font-family="Poppins, sans-serif"
                font-size="6"
                fill="#FFFFFF"
                text-anchor="middle"
              >
                Entidad A
              </text>
              <!-- Entidad 2 -->
              <rect
                x="60"
                y="35"
                width="30"
                height="20"
                rx="3"
                stroke="#006657"
                fill="#006657"
                fill-opacity="0.3"
              />
              <text
                x="75"
                y="47"
                font-family="Poppins, sans-serif"
                font-size="6"
                fill="#FFFFFF"
                text-anchor="middle"
              >
                Entidad B
              </text>
              <!-- Relación (Rombo) -->
              <path
                d="M40 45 l10 -10 l10 10 l-10 10 Z"
                stroke="#BC955C"
                fill="#BC955C"
                fill-opacity="0.4"
              />
              <text
                x="50"
                y="47"
                font-family="Poppins, sans-serif"
                font-size="5"
                fill="#FFFFFF"
                text-anchor="middle"
              >
                Relación
              </text>
              <!-- Conectores -->
              <line x1="25" y1="45" x2="40" y2="45" stroke="#BC955C" />
              <line x1="60" y1="45" x2="75" y2="45" stroke="#BC955C" />
            </svg>
            <p style="text-align: left">
              En esta fase inicial, el objetivo es capturar la esencia del
              negocio y los datos más importantes. Utilizamos el
              <strong>Modelo Entidad-Relación (ER)</strong> para crear una
              representación visual.
            </p>
            <ul style="text-align: left; margin-left: 20px; font-size: 0.9em">
              <li>
                <strong>Entidades:</strong> Son los objetos o conceptos clave
                del sistema (ej. Cliente, Producto, Pedido).
              </li>
              <li>
                <strong>Relaciones:</strong> Describen cómo interactúan estas
                entidades entre sí (ej. un Cliente <em>realiza</em> un Pedido).
              </li>
              <li>
                No se definen aún atributos detallados ni claves primarias; el
                foco está en las conexiones fundamentales. Se identifican los
                tipos de relación (unitaria, binaria, ternaria) sin especificar
                cardinalidad detallada.
              </li>
            </ul>
            <p style="text-align: left">
              Es fundamental un profundo conocimiento del negocio para
              identificar correctamente estos elementos.
            </p>
          </div>

          <div class="content-block">
            <h3>2. Diseño Lógico: Estructura y Normalización</h3>
            <svg
              class="db-icon"
              viewBox="0 0 100 100"
              fill="none"
              stroke-width="2"
              aria-label="Icono de Diseño Lógico con Tablas y Normalización"
            >
              <title>Diseño Lógico: Tablas y Normalización</title>
              <!-- Tabla -->
              <rect
                x="20"
                y="25"
                width="60"
                height="40"
                rx="3"
                stroke="#691C32"
                fill="#691C32"
                fill-opacity="0.3"
              />
              <line x1="20" y1="37" x2="80" y2="37" stroke="#BC955C" />
              <!-- Fila header -->
              <line x1="20" y1="49" x2="80" y2="49" stroke="#BC955C" />
              <!-- Fila datos -->
              <line x1="40" y1="25" x2="40" y2="65" stroke="#BC955C" />
              <!-- Columna 1 -->
              <line x1="60" y1="25" x2="60" y2="65" stroke="#BC955C" />
              <!-- Columna 2 -->
              <text
                x="30"
                y="34"
                font-family="Poppins, sans-serif"
                font-size="5"
                fill="#FFFFFF"
              >
                ID
              </text>
              <text
                x="50"
                y="34"
                font-family="Poppins, sans-serif"
                font-size="5"
                fill="#FFFFFF"
              >
                Nombre
              </text>
              <text
                x="70"
                y="34"
                font-family="Poppins, sans-serif"
                font-size="5"
                fill="#FFFFFF"
              >
                Dato
              </text>
              <!-- Símbolo de normalización (check o engranaje) -->
              <circle cx="75" cy="75" r="10" stroke="#BC955C" fill="#006657" />
              <path
                d="M70 75 l3 3 l6 -6"
                stroke="#FFFFFF"
                stroke-width="2.5"
                fill="none"
                stroke-linecap="round"
              />
            </svg>
            <p style="text-align: left">
              Aquí traducimos el modelo conceptual a una estructura más
              detallada, preparándola para un sistema gestor de bases de datos
              (SGBD), pero aún de forma independiente de uno específico. Es
              <strong>crucial realizar la normalización</strong> en esta etapa.
            </p>
            <ul style="text-align: left; margin-left: 20px; font-size: 0.9em">
              <li>
                Se definen todas las entidades (que se convertirán en tablas) y
                sus relaciones.
              </li>
              <li>
                Se especifican los <strong>atributos</strong> para cada entidad
                con sus tipos de datos conceptuales.
              </li>
              <li>
                Se asignan <strong>claves primarias</strong> (PK) para
                identificar unívocamente cada registro.
              </li>
              <li>
                Se establecen <strong>claves foráneas</strong> (FK) para
                implementar las relaciones entre tablas.
              </li>
              <li>
                Se define la <strong>cardinalidad</strong> de las relaciones
                (uno a uno, uno a muchos, muchos a muchos).
              </li>
              <li>
                La <strong>Normalización</strong> (1NF, 2NF, 3NF, etc.) se
                aplica para organizar los datos, reducir redundancias y evitar
                anomalías de actualización, inserción o borrado.
              </li>
            </ul>
          </div>

          <div class="content-block">
            <h3>3. Diseño Físico: Implementación y Optimización</h3>
            <svg
              class="db-icon"
              viewBox="0 0 100 100"
              fill="none"
              stroke-width="2"
              aria-label="Icono de Diseño Físico con SGBD e Índices"
            >
              <title>Diseño Físico: SGBD e Índices</title>
              <!-- Cilindro de Base de Datos -->
              <ellipse
                cx="50"
                cy="30"
                rx="30"
                ry="10"
                stroke="#006657"
                fill="#006657"
                fill-opacity="0.4"
              />
              <path d="M20 30 V70" stroke="#006657" />
              <path d="M80 30 V70" stroke="#006657" />
              <ellipse
                cx="50"
                cy="70"
                rx="30"
                ry="10"
                stroke="#006657"
                fill="#006657"
                fill-opacity="0.4"
              />
              <ellipse
                cx="50"
                cy="50"
                rx="30"
                ry="10"
                stroke="#006657"
                fill="none"
                stroke-dasharray="3,2"
              />
              <!-- Disco intermedio -->

              <!-- Símbolo de índice/optimización (lupa o engranaje) -->
              <circle
                cx="75"
                cy="75"
                r="8"
                stroke="#BC955C"
                fill="#691C32"
                fill-opacity="0.5"
              />
              <line
                x1="79"
                y1="79"
                x2="85"
                y2="85"
                stroke="#BC955C"
                stroke-width="2.5"
              />
              <line
                x1="75"
                y1="70"
                x2="75"
                y2="80"
                stroke="#FFFFFF"
                stroke-width="1.5"
              />
              <!-- Detalle engranaje -->
              <line
                x1="70"
                y1="75"
                x2="80"
                y2="75"
                stroke="#FFFFFF"
                stroke-width="1.5"
              />
            </svg>
            <p style="text-align: left">
              Es la etapa final donde el modelo lógico se traduce a una
              implementación concreta en un SGBD específico (MySQL, PostgreSQL,
              SQL Server, etc.).
            </p>
            <ul style="text-align: left; margin-left: 20px; font-size: 0.9em">
              <li>
                Se definen los <strong>tipos de datos exactos</strong> para cada
                columna según el SGBD (ej. `INT`, `VARCHAR(255)`, `DATE`).
              </li>
              <li>
                Las entidades se convierten en <strong>tablas</strong>, los
                atributos en <strong>columnas</strong>.
              </li>
              <li>
                Se crean <strong>índices</strong> para optimizar la velocidad de
                las consultas.
              </li>
              <li>
                Se pueden tomar decisiones de
                <strong>desnormalización</strong> controlada si es necesario
                para mejorar el rendimiento en casos específicos, sacrificando
                algo de pureza estructural.
              </li>
              <li>
                Se considera el almacenamiento físico, particionamiento y otros
                aspectos dependientes del SGBD.
              </li>
            </ul>
          </div>

          <div class="video-container" style="margin-top: 30px">
            <p style="font-weight: bold; margin-bottom: 10px; color: #ffd700">
              Observa el Proceso en Acción:
            </p>
            <iframe
              id="videoPlayer"
              width="560"
              height="315"
              src="https://www.youtube.com/embed/AOWZiqKb7LU?si=lwDARCqBPG9TnTN4&enablejsapi=1"
              title="YouTube video player: Modelamiento de Datos | Diseño Conceptual, Lógico y Físico"
              frameborder="0"
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
              allowfullscreen
            ></iframe>
            <div
              id="quizOverlay"
              class="quiz-overlay"
              style="display: none"
              aria-modal="true"
              role="dialog"
              aria-labelledby="quizOverlayTitle"
            >
              <div class="quiz-content">
                <h3 id="quizOverlayTitle">Pregunta del Video</h3>
                <div id="quizQuestion" role="form"></div>
              </div>
            </div>
          </div>
          <button
            class="btn"
            onclick="showSection('evaluacion-formativa')"
            style="margin-top: 25px"
          >
            Siguiente
          </button>
        </div>
      </div>
    </section>

    <!-- Evaluación Formativa -->
    <section id="evaluacion-formativa" class="section">
      <div class="container">
        <div class="card">
          <h2>Evaluación Formativa</h2>
          <p>
            Refuerza lo aprendido con esta actividad interactiva. Sigue las
            instrucciones en pantalla.
          </p>
          <iframe
            title="Juego Educaplay: Desafío de Diseño de Base de Datos (Formativa)"
            allow="fullscreen; autoplay; allow-top-navigation-by-user-activation"
            allowfullscreen
            width="795"
            height="690"
            style="
              max-width: 100%;
              border: 2px solid #bc955c;
              border-radius: 10px;
            "
            frameborder="0"
            src="https://es.educaplay.com/juego/24339351-desafio_de_diseno_de_base_de_datos.html"
          ></iframe>
          <button class="btn" onclick="showSection('evaluacion')">
            Siguiente
          </button>
        </div>
      </div>
    </section>

    <!-- Evaluación -->
    <section id="evaluacion" class="section">
      <div class="container">
        <div class="card">
          <h2>Evaluación Final</h2>
          <form id="finalQuizForm" novalidate>
            <h3>Preguntas de Opción Múltiple (Comprensión y Aplicación)</h3>
            <div class="question" role="group" aria-labelledby="q1-label">
              <p id="q1-label">
                1. ¿Qué representa un diagrama ER en el diseño conceptual?
              </p>
              <label
                ><input type="radio" name="q1" value="a" /> a) Esquema
                físico</label
              >
              <label
                ><input type="radio" name="q1" value="b" /> b) Modelo de
                entidades y relaciones</label
              >
              <label
                ><input type="radio" name="q1" value="c" /> c) Lenguaje de
                consulta</label
              >
              <label
                ><input type="radio" name="q1" value="d" /> d) Índice de
                rendimiento</label
              >
            </div>
            <div class="question" role="group" aria-labelledby="q2-label">
              <p id="q2-label">
                2. Según la transcripción, ¿en qué etapa del modelamiento de
                datos es CRUCIAL aplicar la normalización?
              </p>
              <label
                ><input type="radio" name="q2" value="a" /> a) Descripción de
                Requisitos</label
              >
              <label
                ><input type="radio" name="q2" value="b" /> b) Diseño
                Conceptual</label
              >
              <label
                ><input type="radio" name="q2" value="c" /> c) Diseño
                Lógico</label
              >
              <label
                ><input type="radio" name="q2" value="d" /> d) Diseño
                Físico</label
              >
            </div>
            <div class="question" role="group" aria-labelledby="q3-label">
              <p id="q3-label">
                3. En el Diseño Lógico, ¿qué elemento se utiliza para establecer
                una relación entre dos tablas, referenciando la clave primaria
                de otra tabla?
              </p>
              <label
                ><input type="radio" name="q3" value="a" /> a) Un atributo
                simple</label
              >
              <label
                ><input type="radio" name="q3" value="b" /> b) Una clave
                candidata</label
              >
              <label
                ><input type="radio" name="q3" value="c" /> c) Una clave
                foránea</label
              >
              <label
                ><input type="radio" name="q3" value="d" /> d) Un índice de
                tabla</label
              >
            </div>
            <div class="question" role="group" aria-labelledby="q4-label">
              <p id="q4-label">
                4. Durante el Diseño Físico, ¿cuál de las siguientes tareas NO
                es una característica principal mencionada en la transcripción
                para esta etapa?
              </p>
              <label
                ><input type="radio" name="q4" value="a" /> a) Definir los tipos
                de datos para cada columna (ej. integer, varchar).</label
              >
              <label
                ><input type="radio" name="q4" value="b" /> b) Convertir
                entidades en tablas y atributos en columnas.</label
              >
              <label
                ><input type="radio" name="q4" value="c" /> c) Realizar la
                normalización exhaustiva de todas las tablas.</label
              >
              <label
                ><input type="radio" name="q4" value="d" /> d) Especificar
                claves principales y externas según el SGBD.</label
              >
            </div>
            <div class="question" role="group" aria-labelledby="q5-label">
              <p id="q5-label">
                5. ¿Qué describe la cardinalidad en el contexto del diseño
                lógico de bases de datos, según el video?
              </p>
              <label
                ><input type="radio" name="q5" value="a" /> a) El número de
                atributos que puede tener una entidad.</label
              >
              <label
                ><input type="radio" name="q5" value="b" /> b) El número máximo
                de ocurrencias de una entidad asociadas a ocurrencias de otra
                entidad en una relación.</label
              >
              <label
                ><input type="radio" name="q5" value="c" /> c) La velocidad con
                la que se pueden consultar los datos.</label
              >
              <label
                ><input type="radio" name="q5" value="d" /> d) El lenguaje
                utilizado para definir la estructura de la base de datos.</label
              >
            </div>

            <h3>Preguntas Verdadero o Falso</h3>
            <div class="question" role="group" aria-labelledby="q6-label">
              <p id="q6-label">
                1. Un diagrama ER (utilizado en el Diseño Conceptual) es
                independiente del Sistema de Gestión de Bases de Datos (SGBD)
                específico que se usará posteriormente.
              </p>
              <label
                ><input type="radio" name="q6" value="true" /> Verdadero</label
              >
              <label
                ><input type="radio" name="q6" value="false" /> Falso</label
              >
            </div>
            <div class="question" role="group" aria-labelledby="q7-label">
              <p id="q7-label">
                2. En el Diseño Conceptual inicial, es fundamental definir todos
                los atributos detallados y las claves primarias de cada entidad.
              </p>
              <label
                ><input type="radio" name="q7" value="true" /> Verdadero</label
              >
              <label
                ><input type="radio" name="q7" value="false" /> Falso</label
              >
            </div>
            <div class="question" role="group" aria-labelledby="q8-label">
              <p id="q8-label">
                3. El Diseño Lógico describe los datos con el mayor detalle
                posible, pero sin considerar cómo se implementarán físicamente
                en un SGBD.
              </p>
              <label
                ><input type="radio" name="q8" value="true" /> Verdadero</label
              >
              <label
                ><input type="radio" name="q8" value="false" /> Falso</label
              >
            </div>
            <div class="question" role="group" aria-labelledby="q9-label">
              <p id="q9-label">
                4. La desnormalización es un proceso que puede ocurrir en el
                Diseño Físico para ajustarse a requisitos específicos del
                usuario, aunque la normalización se haya realizado en el Diseño
                Lógico.
              </p>
              <label
                ><input type="radio" name="q9" value="true" /> Verdadero</label
              >
              <label
                ><input type="radio" name="q9" value="false" /> Falso</label
              >
            </div>
            <div class="question" role="group" aria-labelledby="q10-label">
              <p id="q10-label">
                5. Según la transcripción, las relaciones 'uno a uno', 'uno a
                muchos' y 'muchos a muchos' son ejemplos de tipos de entidades.
              </p>
              <label
                ><input type="radio" name="q10" value="true" /> Verdadero</label
              >
              <label
                ><input type="radio" name="q10" value="false" /> Falso</label
              >
            </div>
          </form>
          <br />
          <button type="button" class="btn" onclick="submitFinalQuiz()">
            Enviar Evaluación
          </button>
          <div id="quizFeedback" role="alert" aria-live="assertive"></div>
          <br />
          <button class="btn" onclick="downloadFinalReport()">
            Descargar Reporte Final
          </button>
          <button class="btn" onclick="showSection('sintesis')">
            Siguiente
          </button>
        </div>
      </div>
    </section>

    <!-- Síntesis -->
    <section id="sintesis" class="section">
      <div class="container">
        <div class="card">
          <h2>Síntesis: Ideas Clave del Modelamiento de Datos</h2>
          <p>
            Hemos recorrido las etapas fundamentales del diseño de bases de
            datos. Aquí las ideas clave extraídas del video:
          </p>
          <ul style="text-align: left; margin-left: 20px">
            <li>
              <strong>Visión Unificada y Requisitos:</strong> El modelamiento de
              datos crea una representación clara y compartida, iniciando con
              una descripción detallada de los requisitos del negocio en
              lenguaje natural.
            </li>
            <li>
              <strong>Diseño Conceptual (Modelo ER):</strong> Se centra en
              identificar las principales <em>entidades</em> y las
              <em>relaciones</em> de alto nivel entre ellas, sin entrar en
              detalles de atributos específicos o claves en esta fase.
            </li>
            <li>
              <strong>Diseño Lógico (Normalización y Detalles):</strong>
              Transforma el modelo conceptual en una estructura detallada con
              <em>atributos</em>, <em>claves primarias</em>,
              <em>claves foráneas</em> y <em>cardinalidad</em>. La
              <em>normalización</em> es crucial aquí para asegurar la integridad
              y eficiencia.
            </li>
            <li>
              <strong>Diseño Físico (Implementación en SGBD):</strong> Define
              cómo se construirá la base de datos en un sistema gestor (como
              MySQL, SQL Server), especificando <em>tipos de datos</em> para
              columnas, y traduciendo entidades a tablas y atributos a columnas.
            </li>
            <li>
              <strong>De Entidades a Tablas:</strong> El proceso culmina con la
              conversión de entidades en tablas, atributos en columnas y
              relaciones en claves foráneas dentro del SGBD elegido.
            </li>
          </ul>
          <div id="infographic" class="infographic">
            <p style="margin-bottom: 10px; font-weight: bold; color: #ffd700">
              Etapas del Modelamiento de Datos:
            </p>
            <svg
              class="db-icon"
              viewBox="0 0 250 60"
              fill="none"
              stroke="#BC955C"
              stroke-width="1.5"
              aria-labelledby="infographicTitle infographicDesc"
              style="width: 100%; max-width: 500px; height: auto"
            >
              <title id="infographicTitle">
                Infografía de Etapas del Modelamiento de Datos
              </title>
              <desc id="infographicDesc">
                Tres bloques representando las etapas: Conceptual, Lógico y
                Físico, conectados por flechas.
              </desc>

              <!-- Conceptual -->
              <rect
                x="10"
                y="10"
                width="70"
                height="40"
                fill="#006657"
                rx="5"
              />
              <text
                x="45"
                y="28"
                fill="#FFFFFF"
                text-anchor="middle"
                font-size="9"
                font-weight="bold"
              >
                Conceptual
              </text>
              <text
                x="45"
                y="42"
                fill="#E0E0E0"
                text-anchor="middle"
                font-size="7"
              >
                (ER, Entidades)
              </text>

              <!-- Flecha -->
              <path
                d="M82 30 L 92 30 L 92 25 L 102 32.5 L 92 40 L 92 35 L 82 35 Z"
                fill="#BC955C"
                stroke="none"
                aria-hidden="true"
              />

              <!-- Lógico -->
              <rect
                x="105"
                y="10"
                width="70"
                height="40"
                fill="#691C32"
                rx="5"
              />
              <text
                x="140"
                y="28"
                fill="#FFFFFF"
                text-anchor="middle"
                font-size="9"
                font-weight="bold"
              >
                Lógico
              </text>
              <text
                x="140"
                y="42"
                fill="#E0E0E0"
                text-anchor="middle"
                font-size="7"
              >
                (Normalización)
              </text>

              <!-- Flecha -->
              <path
                d="M177 30 L 187 30 L 187 25 L 197 32.5 L 187 40 L 187 35 L 177 35 Z"
                fill="#BC955C"
                stroke="none"
                aria-hidden="true"
              />

              <!-- Físico -->
              <rect
                x="200"
                y="10"
                width="70"
                height="40"
                fill="#006657"
                rx="5"
              />
              <text
                x="235"
                y="28"
                fill="#FFFFFF"
                text-anchor="middle"
                font-size="9"
                font-weight="bold"
              >
                Físico
              </text>
              <text
                x="235"
                y="42"
                fill="#E0E0E0"
                text-anchor="middle"
                font-size="7"
              >
                (SGBD, Tipos)
              </text>
            </svg>
          </div>
          <button class="btn" onclick="showSection('cierre')">Siguiente</button>
        </div>
      </div>
    </section>

    <!-- Cierre -->
    <section id="cierre" class="section">
      <div class="container">
        <div class="card">
          <h2>Cierre y Reflexión</h2>
          <p>Reflexiona sobre tu aprendizaje:</p>
          <form id="reflectionForm">
            <div class="input-group">
              <label for="r1">1. ¿Qué aprendiste?</label>
              <textarea
                id="r1"
                required
                aria-required="true"
                aria-describedby="r1-error"
                rows="3"
              ></textarea>
              <span id="r1-error" class="error" role="alert"></span>
            </div>
            <div class="input-group">
              <label for="r2">2. ¿Cómo lo aplicarías?</label>
              <textarea
                id="r2"
                required
                aria-required="true"
                aria-describedby="r2-error"
                rows="3"
              ></textarea>
              <span id="r2-error" class="error" role="alert"></span>
            </div>
            <div class="input-group">
              <label for="r3">3. ¿Qué desafíos tuviste?</label>
              <textarea
                id="r3"
                required
                aria-required="true"
                aria-describedby="r3-error"
                rows="3"
              ></textarea>
              <span id="r3-error" class="error" role="alert"></span>
            </div>
            <button type="submit" class="btn">Guardar Reflexiones</button>
          </form>
          <div
            id="saveMessage"
            class="message"
            role="status"
            aria-live="polite"
          ></div>
          <div
            id="savedResponses"
            class="saved-responses"
            aria-live="polite"
          ></div>
          <br />
          <button class="btn" onclick="downloadQuizReport()">
            Descargar Resultados Video-Quiz
          </button>
          <button class="btn" onclick="downloadFinalReport()">
            Descargar Reporte Final Completo
          </button>
          <button class="btn" onclick="showSection('certificado')">
            Generar Certificado
          </button>
        </div>
      </div>
    </section>

    <!-- Certificado -->
    <section id="certificado" class="section">
      <div class="container">
        <div class="card">
          <h2>Certificado</h2>
          <!-- Este es el DIV que se convertirá a PDF -->
          <div
            id="certificate"
            class="certificate"
            aria-live="polite"
            style="
              padding: 20px;
              border: 1px solid #ccc; /* Estilos base para el contenedor del certificado */
            "
          >
            <!-- Título Principal del Certificado (ej. "Certificado de Diseño de Bases de Datos") -->
            <h3
              style="
                text-align: center;
                color: #006657;
                font-size: 1.6em;
                margin-bottom: 25px;
                border-bottom: 2px solid #bc955c;
                padding-bottom: 10px;
              "
            >
              Cápsula Educativa: Diseño de Bases de Datos
            </h3>

            <!-- Contenido dinámico del texto del certificado (título, nombre, razón, etc.) -->
            <div id="cert-text" style="margin-bottom: 20px; text-align: center">
              <!-- Este contenido se llena con JavaScript -->
            </div>

            <!-- Contenedor para elementos inferiores (QR, Icono AI, Fecha) -->
            <div
              style="
                display: flex;
                justify-content: space-between;
                align-items: flex-end;
                margin-top: 30px;
                padding-top: 20px;
                border-top: 1px dashed #bc955c;
              "
            >
              <div
                id="qr-code"
                style="
                  width: 80px;
                  height: 80px; /* Estilos en JS para el QR */
                "
                aria-label="Código QR de verificación"
              >
                <!-- QR se genera aquí -->
              </div>

              <svg
                class="ai-icon"
                viewBox="0 0 64 64"
                fill="none"
                stroke="#BC955C"
                stroke-width="2"
                aria-label="Icono de Inteligencia Artificial"
                style="
                  width: 50px;
                  height: 50px;
                  display: block;
                  margin: 0 auto;
                "
              >
                <title>Icono de Inteligencia Artificial</title>
                <path
                  d="M32 54C44.1503 54 54 44.1503 54 32C54 19.8497 44.1503 10 32 10C19.8497 10 10 19.8497 10 32C10 44.1503 19.8497 54 32 54Z"
                  stroke-width="3"
                  stroke-miterlimit="10"
                />
                <path
                  d="M22 25L23.833 22H29.833"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
                <path
                  d="M34.167 22H40.167L42 25"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
                <path
                  d="M22 32H23"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
                <path
                  d="M41 32H42"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
                <path
                  d="M22 39L23.833 42H29.833"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
                <path
                  d="M34.167 42H40.167L42 39"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
                <path
                  d="M29 32C29 30.3431 30.3431 29 32 29C33.6569 29 35 30.3431 35 32C35 33.6569 33.6569 35 32 35C30.3431 35 29 33.6569 29 32Z"
                  stroke-width="1.5"
                  stroke-miterlimit="10"
                />
              </svg>

              <div style="text-align: right">
                <!-- La fecha ya se incluye en cert-text -->
              </div>
            </div>
          </div>
          <!-- Fin del DIV #certificate -->

          <button
            class="btn"
            onclick="downloadCertificate()"
            style="margin-top: 20px"
          >
            Descargar Certificado
          </button>
        </div>
      </div>
    </section>

    <script src="script.js"></script>
  </body>
</html>
